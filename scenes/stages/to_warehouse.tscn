[gd_scene load_steps=17 format=3 uid="uid://dj36hldakta6k"]

[ext_resource type="Script" uid="uid://bh1hxv7xhu0xm" path="res://scripts/to_warehouse.gd" id="1_g5j8t"]
[ext_resource type="PackedScene" uid="uid://cotqedi4mq2rs" path="res://scenes/player.tscn" id="2_ft2jl"]
[ext_resource type="Texture2D" uid="uid://wpbcu5ni4v05" path="res://assets/textures/debug/editor_grid.png" id="3_8to8g"]
[ext_resource type="Script" uid="uid://27xr8j11a8al" path="res://classes/nodes/modules/DialogueInitiator.gd" id="4_22f0a"]
[ext_resource type="Script" uid="uid://b7dvxli4hd1ni" path="res://addons/GodotDevTools/classes/nodes/modules/triggers/AreaTrigger.gd" id="5_dqy33"]
[ext_resource type="Script" uid="uid://dytis7djokgek" path="res://classes/nodes/modules/StageLauncher.gd" id="6_0su6h"]
[ext_resource type="PackedScene" uid="uid://b2yajy7wt0yx1" path="res://assets/meshes/Debug/to_warehouse.glb" id="6_dqy33"]
[ext_resource type="PackedScene" uid="uid://d2igi16yoyihl" path="res://scenes/characters/snowman.tscn" id="8_jbe65"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_fo0y1"]
sky_horizon_color = Color(0.66224277, 0.6717428, 0.6867428, 1)
ground_horizon_color = Color(0.66224277, 0.6717428, 0.6867428, 1)

[sub_resource type="Sky" id="Sky_22f0a"]
sky_material = SubResource("ProceduralSkyMaterial_fo0y1")

[sub_resource type="Environment" id="Environment_dqy33"]
background_mode = 2
sky = SubResource("Sky_22f0a")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="BoxShape3D" id="BoxShape3D_2uw2f"]
size = Vector3(100, 0.497, 100)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_1o4kk"]
albedo_texture = ExtResource("3_8to8g")
uv1_scale = Vector3(20, 20, 20)
texture_filter = 0

[sub_resource type="PlaneMesh" id="PlaneMesh_0su6h"]
material = SubResource("StandardMaterial3D_1o4kk")
size = Vector2(100, 100)

[sub_resource type="BoxShape3D" id="BoxShape3D_0su6h"]
size = Vector3(13.291992, 5.66626, 4.5615234)

[sub_resource type="NavigationMesh" id="NavigationMesh_jbe65"]
vertices = PackedVector3Array(0.21674496, 0, -1.5832921, 1.2955678, 0, 1.3155552, 0.21674496, 0, 1.5832921, 1.2955678, 0, -1.3155552, -2.4655163, 0.09088192, -0.12134454, -2.2832658, 0.09088192, 0.62381005, -2.2832658, 0.09088192, 0.62381005, -4.2127724, 0, 0.08420691, -2.4655163, 0.09088192, -0.12134454, -4.3192787, 0, 0.80249673, -4.3192787, 0, 0.80249673, -5.200569, 0, -0.5084583, -4.2127724, 0, 0.08420691, -5.607356, 0, 0.065106645, -5.789729, -0.28835034, -1.6767642, -7.466538, -0.28835034, -2.4747455, -7.0655427, -0.28835034, -3.0523744, -7.466538, -0.28835034, -2.4747455, -8.940843, 0, -3.5690632, -7.0655427, -0.28835034, -3.0523744, -9.049383, 0, -2.874318, -7.466538, -0.28835034, -2.4747455, -6.8499246, 0.5173469, -1.2642181, -7.945817, 0.5173469, -2.3479183, -5.607356, 0, 0.065106645, -5.9084744, 0.8333291, 0.43532106, 1.2955678, 0, 1.3155552, 0.45000023, 0.8567851, 2.0400143, 0.21674496, 0, 1.5832921, 1.7808948, 0.8333291, 1.5171506, -7.0655427, -0.28835034, -3.0523744, -5.471681, 0.5173469, -2.1577609, -5.789729, -0.28835034, -1.6767642, -7.381438, 0.5173469, -3.5367901, -4.3192787, 0, 0.80249673, -5.9084744, 0.8333291, 0.43532106, -5.607356, 0, 0.065106645, -4.372007, 0.8333291, 1.1068093, -5.200569, 0, -0.5084583, -4.2552943, 0.8333291, -0.51381195, -4.2127724, 0, 0.08420691, -4.8260636, 0.8333291, -0.87749934, 0.21674496, 0, 1.5832921, -2.1408887, 0.93292, 0.9109994, -2.2832658, 0.09088192, 0.62381005, -0.88334185, 0.8567851, 1.4008268, 0.45000023, 0.8567851, 2.0400143, -7.466538, -0.28835034, -2.4747455, -9.265601, 0.7418583, -2.5782595, -9.049383, 0, -2.874318, -7.945817, 0.5173469, -2.3479183, -2.4655163, 0.09088192, -0.12134454, -0.9255631, 0.91389644, -1.2165247, 0.21674496, 0, -1.5832921, 0.40777898, 0.91389644, -1.855712, -2.3406038, 0.93292, -0.45328945, -8.940843, 0, -3.5690632, -7.381438, 0.5173469, -3.5367901, -7.0655427, -0.28835034, -3.0523744, -8.966906, 0.8333291, -4.1029916, -5.789729, -0.28835034, -1.6767642, -4.8260636, 0.8333291, -0.87749934, -5.200569, 0, -0.5084583, -5.471681, 0.5173469, -2.1577609, -2.2832658, 0.09088192, 0.62381005, -4.372007, 0.8333291, 1.1068093, -4.3192787, 0, 0.80249673, -2.1408887, 0.93292, 0.9109994, 1.2955678, 0, -1.3155552, 1.7808948, 0.8333291, 1.5171506, 1.2955678, 0, 1.3155552, 1.7808948, 0.8333291, -1.366092, -4.2127724, 0, 0.08420691, -2.3406038, 0.93292, -0.45328945, -2.4655163, 0.09088192, -0.12134454, -4.2552943, 0.8333291, -0.51381195, 0.21674496, 0, -1.5832921, 1.7808948, 0.8333291, -1.366092, 1.2955678, 0, -1.3155552, 0.40777898, 0.91389644, -1.855712, -9.049383, 0, -2.874318, -10.467928, 0, -0.9598863, -8.940843, 0, -3.5690632, -10.740807, 0, -7.254085, -9.814319, 0, -6.6902623, -11.508473, 0, -0.9776213, -12.86854, -0.3557747, -1.1299295, -14.060358, -0.4779867, -1.2228534, -16.444803, 0, -1.2542303, -18.341368, 0, -2.8666325, -18.67575, -0.052024424, -4.2942324, -19.199451, -0.13350381, -6.530105, -14.952604, -0.13350382, -9.321117, -13.7383795, -0.18219092, -7.538212, -19.199451, -0.13350381, -8.333071, -13.7383795, -0.18219092, -7.538212, -12.532458, -0.07105723, -7.4641137, -10.740807, 0, -7.254085, -16.444803, 0, -1.2542303, -15.254564, -0.33275732, -1.2587082, -14.060358, -0.4779867, -1.2228534, -19.199451, -0.13350381, -8.333071, -14.952604, 0.46227401, -11.322359, -14.952604, -0.13350382, -9.321117, -19.199451, 0.17437954, -10.334312, -18.74092, 1.4367013, -13.458531, -14.245748, 1.4367013, -12.703777, -13.07595, 2.134976, -13.812991, -16.850971, 2.134976, -16.367483, -16.850971, 2.134976, -16.367483, -16.77381, 2.134976, -17.507671, -13.07595, 2.134976, -13.812991, -13.374095, 2.134976, -20.883837, -12.277371, 2.134976, -18.25485, -17.201866, 2.134976, -22.732523, -17.202642, 2.134976, -17.742104, -17.631475, 2.134976, -17.976536, -20.972294, 2.134976, -21.921772, -22.850079, 2.134976, -22.120722, -27.166973, 2.134976, -20.691332, -25.353256, 2.134976, -22.00331, -18.70116, 2.134976, -17.721066, -23.10284, 2.134976, -13.174278, -20.995598, 2.134976, -13.943349, -19.472874, 2.134976, -15.874214, -23.10284, 2.134976, -13.174278, -27.166973, 0.028166771, -20.691332, -27.166973, 2.134976, -20.691332, -23.10284, 0.028166771, -13.174278, -23.10284, 0.028166771, -13.174278, -30.063541, 0.028166771, -19.287384, -27.166973, 0.028166771, -20.691332, -30.690086, 0.028166771, -15.441489, -31.319616, 0.028166771, -16.574287, -30.057533, 0.028166771, -14.30325, -25.999409, 0.028166771, -11.770329, -29.15034, 0.028166771, -12.561975, -1, 0, 1, -1, 0, -1, -1, 0, 1, -1, 0, -1, -5.607356, 0, 0.065106645, -5.789729, -0.28835034, -1.6767642, -5.200569, 0, -0.5084583, -6.4664783, -0.28835034, -1.4858123, -6.4664783, -0.28835034, -1.4858123, -6.4664783, -0.28835034, -1.4858123, -1, 0, 1, -0.88334185, 0.8567851, 1.4008268, -1, 0, 1, -0.9255631, 0.91389644, -1.2165247, -1, 0, -1, -6.8499246, 0.5173469, -1.2642181, -6.4664783, -0.28835034, -1.4858123, -1, 0, -1, -10.14446, 0, -3.7958233, -11.140823, 0, -3.9835372, -16.625452, -0.07075724, -4.5051317, -14.952604, -0.13350382, -7.5181518, -13.901072, -0.49414077, -4.3471375, -15.102216, -0.23222765, -4.4167953, -13.7383795, -0.18219092, -7.538212, -12.701531, -0.37750635, -4.2775736, -13.901072, -0.49414077, -4.3471375, -15.254564, -0.33275732, -1.2587082, -16.625452, -0.07075724, -4.5051317, -15.102216, -0.23222765, -4.4167953, -11.508473, 0, -0.9776213, -12.701531, -0.37750635, -4.2775736, -11.140823, 0, -3.9835372, -12.86854, -0.3557747, -1.1299295, -16.785648, -0.13350381, -7.387987, -14.952604, -0.13350382, -7.5181518, -16.785648, -0.13350381, -9.190953, -14.952604, -0.13350382, -7.5181518, -14.952604, -0.13350382, -9.321117, -16.785648, -0.13350381, -9.190953, -16.785648, 0.46227401, -11.192195, -12.701531, -0.37750635, -4.2775736, -13.901072, -0.49414077, -4.3471375, -16.625452, -0.07075724, -4.5051317, -14.952604, -0.13350382, -7.5181518, -15.102216, -0.23222765, -4.4167953, -16.785648, -0.13350381, -7.387987, -12.701531, -0.37750635, -4.2775736, -11.140823, 0, -3.9835372, -12.532458, -0.07105723, -7.4641137, -18.67575, -0.052024424, -4.2942324, -16.785648, -0.13350381, -7.387987, -16.625452, -0.07075724, -4.5051317, -19.199451, -0.13350381, -6.530105, -13.901072, -0.49414077, -4.3471375, -15.102216, -0.23222765, -4.4167953, -16.785648, 0.46227401, -11.192195, -16.785648, -0.13350381, -9.190953, -16.785648, 0.46227401, -11.192195, -14.952604, 0.46227401, -11.322359, -16.687445, 1.4367013, -13.552354, -19.199451, 0.17437954, -10.334312, -16.687445, 1.4367013, -13.552354, -16.785648, 0.46227401, -11.192195, -16.687445, 1.4367013, -13.552354, -14.245748, 1.4367013, -12.703777, -14.944209, 2.134976, -15.599489, -18.74092, 1.4367013, -13.458531, -14.944209, 2.134976, -15.599489, -16.687445, 1.4367013, -13.552354, -14.944209, 2.134976, -15.599489, -14.862307, 2.134976, -18.263792, -16.138735, 2.134976, -19.142265, -17.415163, 2.134976, -20.02074, -20.30316, 2.134976, -20.71771, -19.65095, 2.134976, -19.544102, -21.79214, 2.134976, -20.217031, -20.885221, 2.134976, -18.585096, -23.956177, 2.134976, -19.48936, -22.817972, 2.134976, -17.441238, -26.098644, 2.134976, -18.768946, -24.802464, 2.134976, -16.436554, -24.802464, 2.134976, -16.436554, -25.98755, 0.028166771, -18.569038, -26.098644, 2.134976, -18.768946, -24.802464, 0.028166771, -16.436554, -24.802464, 0.028166771, -16.436554, -24.802464, 2.134976, -16.436554, -25.98755, 0.028166771, -18.569038, -28.884119, 0.028166771, -17.16509, -24.802464, 0.028166771, -16.436554, -27.699032, 0.028166771, -15.032605)
polygons = [PackedInt32Array(137, 0, 2), PackedInt32Array(137, 138, 0), PackedInt32Array(0, 1, 2), PackedInt32Array(0, 3, 1), PackedInt32Array(139, 4, 140), PackedInt32Array(139, 5, 4), PackedInt32Array(6, 7, 8), PackedInt32Array(6, 9, 7), PackedInt32Array(10, 11, 12), PackedInt32Array(10, 13, 11), PackedInt32Array(141, 142, 143), PackedInt32Array(141, 144, 142), PackedInt32Array(145, 16, 14), PackedInt32Array(145, 15, 16), PackedInt32Array(17, 18, 19), PackedInt32Array(17, 20, 18), PackedInt32Array(146, 23, 21), PackedInt32Array(146, 22, 23), PackedInt32Array(26, 27, 28), PackedInt32Array(26, 29, 27), PackedInt32Array(30, 31, 32), PackedInt32Array(30, 33, 31), PackedInt32Array(34, 35, 36), PackedInt32Array(34, 37, 35), PackedInt32Array(38, 39, 40), PackedInt32Array(38, 41, 39), PackedInt32Array(147, 43, 44), PackedInt32Array(147, 45, 43), PackedInt32Array(47, 48, 49), PackedInt32Array(47, 50, 48), PackedInt32Array(42, 148, 149), PackedInt32Array(42, 46, 148), PackedInt32Array(51, 150, 151), PackedInt32Array(51, 55, 150), PackedInt32Array(56, 57, 58), PackedInt32Array(56, 59, 57), PackedInt32Array(24, 152, 153), PackedInt32Array(24, 25, 152), PackedInt32Array(154, 54, 53), PackedInt32Array(154, 52, 54), PackedInt32Array(60, 61, 62), PackedInt32Array(60, 63, 61), PackedInt32Array(64, 65, 66), PackedInt32Array(64, 67, 65), PackedInt32Array(68, 69, 70), PackedInt32Array(68, 71, 69), PackedInt32Array(72, 73, 74), PackedInt32Array(72, 75, 73), PackedInt32Array(76, 77, 78), PackedInt32Array(76, 79, 77), PackedInt32Array(80, 155, 82), PackedInt32Array(155, 84, 82), PackedInt32Array(80, 81, 155), PackedInt32Array(156, 84, 155), PackedInt32Array(81, 156, 155), PackedInt32Array(156, 83, 84), PackedInt32Array(81, 85, 156), PackedInt32Array(88, 90, 157), PackedInt32Array(88, 89, 90), PackedInt32Array(158, 159, 160), PackedInt32Array(158, 95, 159), PackedInt32Array(161, 162, 163), PackedInt32Array(161, 96, 162), PackedInt32Array(164, 165, 166), PackedInt32Array(164, 98, 165), PackedInt32Array(167, 168, 169), PackedInt32Array(167, 170, 168), PackedInt32Array(171, 92, 172), PackedInt32Array(171, 173, 92), PackedInt32Array(91, 173, 171), PackedInt32Array(91, 94, 173), PackedInt32Array(174, 175, 93), PackedInt32Array(176, 102, 103), PackedInt32Array(176, 177, 102), PackedInt32Array(178, 87, 179), PackedInt32Array(178, 86, 87), PackedInt32Array(180, 181, 182), PackedInt32Array(180, 183, 181), PackedInt32Array(184, 97, 185), PackedInt32Array(184, 186, 97), PackedInt32Array(187, 188, 189), PackedInt32Array(187, 190, 188), PackedInt32Array(191, 99, 192), PackedInt32Array(191, 100, 99), PackedInt32Array(101, 193, 194), PackedInt32Array(101, 104, 193), PackedInt32Array(195, 106, 196), PackedInt32Array(195, 197, 106), PackedInt32Array(198, 199, 200), PackedInt32Array(198, 105, 199), PackedInt32Array(201, 107, 202), PackedInt32Array(201, 203, 107), PackedInt32Array(204, 205, 206), PackedInt32Array(204, 108, 205), PackedInt32Array(207, 113, 111), PackedInt32Array(207, 208, 113), PackedInt32Array(109, 208, 207), PackedInt32Array(208, 112, 113), PackedInt32Array(109, 110, 208), PackedInt32Array(208, 209, 112), PackedInt32Array(110, 209, 208), PackedInt32Array(209, 114, 112), PackedInt32Array(110, 115, 209), PackedInt32Array(115, 210, 209), PackedInt32Array(209, 210, 114), PackedInt32Array(115, 116, 210), PackedInt32Array(211, 114, 210), PackedInt32Array(211, 117, 114), PackedInt32Array(116, 212, 210), PackedInt32Array(210, 212, 211), PackedInt32Array(116, 121, 212), PackedInt32Array(213, 117, 211), PackedInt32Array(212, 213, 211), PackedInt32Array(213, 118, 117), PackedInt32Array(121, 214, 212), PackedInt32Array(212, 214, 213), PackedInt32Array(121, 124, 214), PackedInt32Array(215, 118, 213), PackedInt32Array(214, 215, 213), PackedInt32Array(215, 120, 118), PackedInt32Array(124, 216, 214), PackedInt32Array(214, 216, 215), PackedInt32Array(124, 123, 216), PackedInt32Array(217, 120, 215), PackedInt32Array(216, 217, 215), PackedInt32Array(217, 119, 120), PackedInt32Array(216, 218, 217), PackedInt32Array(123, 218, 216), PackedInt32Array(123, 122, 218), PackedInt32Array(219, 220, 221), PackedInt32Array(219, 222, 220), PackedInt32Array(220, 127, 221), PackedInt32Array(220, 126, 127), PackedInt32Array(125, 223, 224), PackedInt32Array(125, 128, 223), PackedInt32Array(225, 130, 131), PackedInt32Array(225, 226, 130), PackedInt32Array(226, 133, 130), PackedInt32Array(227, 226, 225), PackedInt32Array(226, 132, 133), PackedInt32Array(227, 228, 226), PackedInt32Array(228, 132, 226), PackedInt32Array(129, 228, 227), PackedInt32Array(228, 134, 132), PackedInt32Array(129, 135, 228), PackedInt32Array(135, 134, 228), PackedInt32Array(135, 136, 134)]

[node name="ToWarehouse" type="Node3D"]
script = ExtResource("1_g5j8t")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_dqy33")

[node name="floor" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -7.7196975, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="floor"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.25170898, -43.194565)
shape = SubResource("BoxShape3D_2uw2f")

[node name="MeshInstance3D" type="MeshInstance3D" parent="floor"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -42.99329)
mesh = SubResource("PlaneMesh_0su6h")
skeleton = NodePath("../..")

[node name="player" parent="." instance=ExtResource("2_ft2jl")]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.9145295, 0.40451908, 0, -0.40451908, 0.9145295, 0, 0, 0)
shadow_enabled = true

[node name="DialogueInitiator" type="Node3D" parent="."]
transform = Transform3D(0.33122253, 0, 0.9435527, 0, 1, 0, -0.9435527, 0, 0.33122253, -18.477331, -0.511219, 2.4689322)
script = ExtResource("4_22f0a")
dialog_mode = 1
name_in_dialog = "Henkie"
dialog_file_name = "more_snowmen"
metadata/_custom_type_script = "uid://27xr8j11a8al"

[node name="AreaTrigger" type="Node3D" parent="DialogueInitiator"]
script = ExtResource("5_dqy33")
metadata/_custom_type_script = "uid://b7dvxli4hd1ni"

[node name="Area3D" type="Area3D" parent="DialogueInitiator/AreaTrigger"]
collision_layer = 0
collision_mask = 8

[node name="CollisionShape3D" type="CollisionShape3D" parent="DialogueInitiator/AreaTrigger/Area3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.6064053, 0)
shape = SubResource("BoxShape3D_0su6h")

[node name="discover_warehouse" type="Node3D" parent="."]
transform = Transform3D(-0.46732825, 0, 0.88408387, 0, 1, 0, -0.88408387, 0, -0.46732825, -98.97288, 8.090727, -70.26393)
script = ExtResource("4_22f0a")
dialog_mode = 1
name_in_dialog = "Henkie"
dialog_file_name = "discover_warehouse"
metadata/_custom_type_script = "uid://27xr8j11a8al"

[node name="AreaTrigger" type="Node3D" parent="discover_warehouse"]
script = ExtResource("5_dqy33")
metadata/_custom_type_script = "uid://b7dvxli4hd1ni"

[node name="Area3D" type="Area3D" parent="discover_warehouse/AreaTrigger"]
collision_layer = 0
collision_mask = 8

[node name="CollisionShape3D" type="CollisionShape3D" parent="discover_warehouse/AreaTrigger/Area3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.6064053, 0)
shape = SubResource("BoxShape3D_0su6h")

[node name="to_warehouse2" type="Node3D" parent="."]
transform = Transform3D(-0.46732825, 0, 0.88408387, 0, 1, 0, -0.88408387, 0, -0.46732825, -119.90802, 0.91564894, -59.19758)
script = ExtResource("6_0su6h")
stage_id = "warehouse_1"
metadata/_custom_type_script = "uid://dytis7djokgek"

[node name="AreaTrigger" type="Node3D" parent="to_warehouse2"]
script = ExtResource("5_dqy33")
metadata/_custom_type_script = "uid://b7dvxli4hd1ni"

[node name="Area3D" type="Area3D" parent="to_warehouse2/AreaTrigger"]
collision_layer = 0
collision_mask = 8

[node name="CollisionShape3D" type="CollisionShape3D" parent="to_warehouse2/AreaTrigger/Area3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.6064053, 0)
shape = SubResource("BoxShape3D_0su6h")

[node name="to_warehouse" parent="." instance=ExtResource("6_dqy33")]

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="to_warehouse"]
transform = Transform3D(4.08, 0, 0, 0, 4.08, 0, 0, 0, 4.08, 0, 0, 0)
navigation_mesh = SubResource("NavigationMesh_jbe65")

[node name="Snowman" parent="." instance=ExtResource("8_jbe65")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -43.873486, 0.019802412, -17.050003)

[node name="Snowman2" parent="." instance=ExtResource("8_jbe65")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -58.202366, 0.019803366, -18.809216)

[node name="Snowman3" parent="." instance=ExtResource("8_jbe65")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -73.40521, 1.282238, -31.415886)
